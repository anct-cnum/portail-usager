<div class="fr-grid-row fr-flex-wrap--nowrap fr-full-container--height">
  <div class="fr-col-xl-4 fr-col-lg-5 fr-col-12 fr-display--flex fr-flex-direction--column fr-index--over fr-shadow--right">
    <address-geolocation
      (usagerAutolocate)="autoLocateUsagerRequest($event)"
      (addressToGeocode)="geocodeUsagerRequest($event)"></address-geolocation>
    <ng-container *ngIf="structuresList$ | async as structuresList">
      <small class="fr-px-3w fr-background-contrast--blue-cumulus" *ngIf="structuresList.length > 0">
        Nombre de marqueurs pr√©sents visibles&nbsp;: {{ (visibleCnfsPermanenceMarkers$ | async)?.features?.length ?? 0 }}
        Nombre de structures visibles&nbsp;: {{ structuresList.length }}
      </small>
      <cnfs-list class="fr-px-3w fr-overflow--auto" [listStructures]="structuresList"></cnfs-list>
    </ng-container>
  </div>
  <div class="fr-col-xl-8 fr-col-lg-7">
    <ng-container *ngIf="visibleCnfsPermanenceMarkers$ | async as visibleMarkers">
      <leaflet-map
        [centerView]="centerView"
        [markers]="visibleMarkers | addUsagerMarker:(usagerCoordinates$ | async)"
        (markerChange)="onMarkerChanged($event)"
        (stateChange)="mapViewChanged($event)"></leaflet-map>
    </ng-container>
  </div>
</div>
