<div class="fr-p-3w fr-gradient--blue">
  <form (submit)="geocode()" [formGroup]="searchForm">
    <label class="fr-label fr-text-inverted--white fr-text--bold fr-mb-1w" for="address">
      Entrez un code postal, une ville, une adresse&nbsp;:
    </label>
    <div class="fr-search-bar fr-search-bar--lg" role="search">
      <div class="fr-dropdown">
        <input
          #addressInput
          formControlName="address"
          class="fr-input"
          placeholder="Code postal, ville, adresse"
          type="search"
          id="address"
          name="address"
          autocomplete="off"
          aria-haspopup="true"
          aria-expanded="false"
          (input)="search(addressInput.value); addressInput.value.length <= 3 ? dropdownPane.reduce() : dropdownPane.expand()"
          (focus)="dropdownPane.expand()"
          (keyup.escape)="dropdownPane.reduce()" />
        <div
          #dropdownPane="dropdownPane"
          [expanded]="true"
          [dropdownControl]="addressInput"
          class="fr-dropdown__pane"
          aria-labelledby="address"
          appDropdownPane>
          <div class="fr-list-group">
            <button
              *ngFor="let address of addressSuggestions; index as addressIndex; trackBy: trackByAddressName"
              type="button"
              class="fr-list-group__item fr-list-group__item--action"
              [class.fr-list-group__item--active]="dropdownPane.activeIndex === addressIndex"
              [attr.aria-current]="dropdownPane.activeIndex === addressIndex ? true : null"
              (focusin)="dropdownPane.setIndex(addressIndex); setAddressSuggestion(address.label)"
              (focusout)="dropdownPane.setIndex(-1)"
              (click)="setAddressSuggestion(address.label); dropdownPane.reduce()">
              <b>{{ address.label }}</b>
              <br />
              <small>{{ address.context }}</small>
            </button>
          </div>
        </div>
      </div>
      <button class="fr-btn">Rechercher</button>
    </div>
  </form>
  <button (click)="locate()" class="fr-btn fr-btn--sm fr-btn--icon-left fr-mt-1w">Me localiser automatiquement</button>
</div>
